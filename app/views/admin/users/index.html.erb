<div class="page-header">
  <h1>Client List <small>Manage your client details here.</small></h1>
</div>

<div class="table-responsive">
	<table class="table table-bordered table-hover">
		<thead>
			<tr>
				<th>Client Name</th>
				<th>Client Email</th>
				<th>Status</th>
				<th class="col-md-2">Action</th>
			</tr>
		</thead>
		<tbody>
			<% @users.each do |user| %>
			<tr>
				<td><%= user.profile.try(:nama_penuh) %></td>
				<td><%= user.email %></td>
				<td>
					<% if user.deleted_at %>
					<span class="label label-danger">Inactive</span>
					<% else %>
					<span class="label label-primary">Active</span>
					<% end %>
				</td>
				<td>
					<div class="btn-group btn-group-xs">
					<%= link_to 'View', admin_user_path(user), :class => "btn btn-primary" %>
					<%= link_to 'Edit', edit_admin_user_path(user), :class => "btn btn-warning" %>
					<%= link_to 'Delete', admin_user_path(user), method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger" %>
					</div>
				</td>
			</tr>
			<% end %>
		</tbody>
	</table>
</div>

<div id="clientSearch">
	<%= form_tag(admin_user_path(@users), method: "get") do %>
	  <%= text_field_tag(:q, params[:search], class: 'typeahead', placeholder: 'Search') %>
	  <input type="submit">
	<% end %>
</div>

<script type="text/javascript">
var substringMatcher = function(strs) {
  return function findMatches(q, cb) {
    var matches, substrRegex;
    matches = [];
    substrRegex = new RegExp(q, 'i');
 
    $.each(strs, function(i, str) {
      if (substrRegex.test(str)) {
        matches.push({ value: str });
      }
    });
 
    cb(matches);
  };
};
 
var states = [
	'<% @users.each do |user| %>',
	'<tr><td>',
	'<%= user.email %>',
	'</td></tr>',
	'<% end %>'

];
 
$('#clientSearch .typeahead').typeahead({
  hint: true,
  highlight: true,
  minLength: 1
},
{
  name: 'states',
  displayKey: 'value',
  source: substringMatcher(states),
  templates: {
    empty: [
      'Unable to find any Client Email'
    ]}
});
</script>




